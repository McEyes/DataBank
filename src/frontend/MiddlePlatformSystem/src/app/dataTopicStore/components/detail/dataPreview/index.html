<div class="xd-all-box" style="height: 100%;">
  <div class="xd-grey-box" style="height: 100%">
    <div class="tableBox" style="height: calc(100% - 0px);background: unset;">
      <div *ngIf="isArray" class="tableCard">
        <div style="display: flex;justify-content: space-between;margin-bottom: 10px;">
          <!-- <p-button label="Clear" [outlined]="true" icon="" (click)="onClearAll()" ></p-button> -->
          <div class="da-button add" (click)="onClearAll()">
            <i style="margin-right: 5px;" class="pi pi-filter-slash"></i>
            {{'operate.clear' | translate}}
          </div>
          <div class="da-button export" (click)="downloadDataTable()">{{'label.export.excel' | translate}}</div>

        </div>
        <p-table [loading]="loading" [scrollable]="true" styleClass="sys-table" scrollHeight="flex" [value]="dataValue"
          [resizableColumns]="true" columnResizeMode="expand" dataKey="id" [paginator]="true" [rows]="20"
          [rowsPerPageOptions]="[20, 50, 100]" [tableStyle]="{ 'min-width': '50rem' }">
          <ng-template pTemplate="header">
            <tr>
              <ng-container *ngFor="let item of headerData">
                <th *ngIf="item !=='_goal_column_'" [id]="item" style="min-width: 200px;" pResizableColumn>
                  
                  <span *ngIf="item ==='_goal_value'">{{'label.goal' | translate}}</span>
                  <ng-container *ngIf="item !=='_goal_value'">
                    <span>{{item}}</span>
                    <p-columnFilter #columnFilter type="text" [field]="item" display="menu" [showMatchModes]="false"
                      [showOperator]="false" [showAddButton]="false" [showClearButton]="false"
                      [showApplyButton]="false">
                      <ng-template pTemplate="filter" #filter>
                        <input [(ngModel)]="queryParams[item]" [placeholder]="'input.please' | translate" />
                        <div style="display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        padding-top: 10px;
                      ">
                          <p-button size="small" (click)="onConfirmClick(item, columnFilter)">Confirm</p-button>
                        </div>
                      </ng-template>
                    </p-columnFilter>
                  </ng-container>
                </th>
              </ng-container>

            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item>
            <tr>
              <ng-container *ngFor="let field of headerData">
                <ng-container *ngIf="field !=='_goal_column_'">
                  <td *ngIf="field !=='_goal_value'" [title]="item[field]" class="xd-tbody text-overflow inline-block"
                    [ngClass]="field === item['_goal_column_'] && item?._goal_value && item._goal_value < item[field] ? 'warn' : ''">
                    {{ field === item['_goal_column_']  ? ((item[field]* 100).toFixed(4) + '%') : item[field] }}
                  </td>
                  <td *ngIf="field ==='_goal_value'" >
                    {{ item[field] ? (item[field]* 100).toFixed(4) + '%' : '-' }}
                  </td>
                </ng-container>
              </ng-container>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="4" class="no-data">{{'nodata' | translate}}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      <div class="obj-content" *ngIf="!isArray">
        <div *ngFor="let item of objectKeks(dataValue)">
          <span class="name">
            {{item}}:
          </span>
          <span>
            {{dataValue[item]}}
          </span>
        </div>
      </div>
    </div>
    <!-- <div class="flex" style="justify-content: center;margin-top: 10px;">
      <div style="display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      width: 83px;
      height: 40px;
      background: #003865;
      border-radius: 4px 4px 4px 4px;" class="da-button search" (click)="goback()">{{'operate.back' | translate}}</div>
    </div> -->
  </div>
</div>
<p-toast></p-toast>