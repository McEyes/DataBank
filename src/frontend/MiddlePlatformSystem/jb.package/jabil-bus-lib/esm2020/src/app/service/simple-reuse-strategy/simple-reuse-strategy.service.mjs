import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class SimpleReuseStrategy {
    shouldReuseRoute(future, curr) {
        return future.routeConfig === curr.routeConfig;
    }
    shouldDetach(route) {
        return false;
        // console.log(route.data['keep'])
        //   return Boolean(route.data['keep']);
    }
    store(route, handle) {
        const url = this.getFullRouteUrl(route);
        const data = this.getRouteData(route);
        if (SimpleReuseStrategy.waitDelete && SimpleReuseStrategy.waitDelete === url) {
            SimpleReuseStrategy.waitDelete = null;
            return;
        }
        else {
            if (SimpleReuseStrategy.currentDelete && SimpleReuseStrategy.currentDelete === url) {
                SimpleReuseStrategy.currentDelete = null;
                return;
            }
            else {
                SimpleReuseStrategy.routeCache.set(url, { handle, data });
                this.addRedirectsRecursively(route);
            }
        }
    }
    shouldAttach(route) {
        const url = this.getFullRouteUrl(route);
        return SimpleReuseStrategy.routeCache.has(url);
    }
    retrieve(route) {
        const url = this.getFullRouteUrl(route);
        const data = this.getRouteData(route);
        return data && SimpleReuseStrategy.routeCache.has(url)
            ? SimpleReuseStrategy.routeCache.get(url)?.handle
            : null;
    }
    addRedirectsRecursively(route) {
        const config = route.routeConfig;
        if (config) {
            if (!config.loadChildren) {
                const routeFirstChild = route.firstChild;
                const routeFirstChildUrl = routeFirstChild
                    ? this.getRouteUrlPaths(routeFirstChild).join('/')
                    : '';
                const childConfigs = config.children;
                if (childConfigs) {
                    const childConfigWithRedirect = childConfigs.find(c => c.path === '' && !!c.redirectTo);
                    if (childConfigWithRedirect) {
                        childConfigWithRedirect.redirectTo = routeFirstChildUrl;
                    }
                }
            }
            route.children.forEach(childRoute => this.addRedirectsRecursively(childRoute));
        }
    }
    getFullRouteUrl(route) {
        return this.getFullRouteUrlPaths(route).filter(Boolean).join('/').replace('/', '_');
    }
    getFullRouteUrlPaths(route) {
        const paths = this.getRouteUrlPaths(route);
        return route.parent ? [...this.getFullRouteUrlPaths(route.parent), ...paths] : paths;
    }
    getRouteUrlPaths(route) {
        return route.url.map(urlSegment => urlSegment.path);
    }
    getRouteData(route) {
        return route.routeConfig && route.routeConfig.data;
    }
    /** delete the route snapshot*/
    static deleteRouteSnapshot(url) {
        if (url[0] === '/') {
            url = url.substring(1);
        }
        url = url.replace('/', '_');
        if (SimpleReuseStrategy.routeCache.has(url)) {
            SimpleReuseStrategy.routeCache.delete(url);
            SimpleReuseStrategy.currentDelete = url;
        }
        else {
            SimpleReuseStrategy.waitDelete = url;
        }
    }
}
SimpleReuseStrategy.routeCache = new Map();
SimpleReuseStrategy.ɵfac = function SimpleReuseStrategy_Factory(t) { return new (t || SimpleReuseStrategy)(); };
SimpleReuseStrategy.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: SimpleReuseStrategy, factory: SimpleReuseStrategy.ɵfac });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(SimpleReuseStrategy, [{
        type: Injectable
    }], null, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlLXJldXNlLXN0cmF0ZWd5LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvYXBwL3NlcnZpY2Uvc2ltcGxlLXJldXNlLXN0cmF0ZWd5L3NpbXBsZS1yZXVzZS1zdHJhdGVneS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7O0FBWTNDLE1BQU0sT0FBTyxtQkFBbUI7SUFLOUIsZ0JBQWdCLENBQUMsTUFBOEIsRUFBRSxJQUE0QjtRQUMzRSxPQUFPLE1BQU0sQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUNqRCxDQUFDO0lBRUQsWUFBWSxDQUFDLEtBQTZCO1FBQ3hDLE9BQU8sS0FBSyxDQUFDO1FBQ2Isa0NBQWtDO1FBQ2xDLHdDQUF3QztJQUMxQyxDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQTZCLEVBQUUsTUFBMkI7UUFDOUQsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RDLElBQUksbUJBQW1CLENBQUMsVUFBVSxJQUFJLG1CQUFtQixDQUFDLFVBQVUsS0FBSyxHQUFHLEVBQUU7WUFDNUUsbUJBQW1CLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztZQUN0QyxPQUFPO1NBQ1I7YUFBTTtZQUNMLElBQUksbUJBQW1CLENBQUMsYUFBYSxJQUFJLG1CQUFtQixDQUFDLGFBQWEsS0FBSyxHQUFHLEVBQUU7Z0JBQ2xGLG1CQUFtQixDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7Z0JBQ3pDLE9BQU87YUFDUjtpQkFBTTtnQkFDTCxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVB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QztJQUMzRSxDQUFDO0lBRUQsK0JBQStCO0lBQ3hCLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxHQUFXO1FBQzNDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNsQixHQUFHLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN4QjtRQUNELEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixJQUFJLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDM0MsbUJBQW1CLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMzQyxtQkFBbUIsQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDO1NBQ3pDO2FBQU07WUFDTCxtQkFBbUIsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQzs7QUE3RmMsOEJBQVUsR0FBRyxJQUFJLEdBQUcsRUFBeUIsQ0FBQTtzRkFEakQsbUJBQW1CO3lFQUFuQixtQkFBbUIsV0FBbkIsbUJBQW1CO3VGQUFuQixtQkFBbUI7Y0FEL0IsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGl2YXRlZFJvdXRlU25hcHNob3QsIERldGFjaGVkUm91dGVIYW5kbGUsIFJvdXRlUmV1c2VTdHJhdGVneSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmludGVyZmFjZSBJUm91dGVDb25maWdEYXRhIHtcclxuICByZXVzZTogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElDYWNoZWRSb3V0ZSB7XHJcbiAgaGFuZGxlOiBEZXRhY2hlZFJvdXRlSGFuZGxlO1xyXG4gIGRhdGE6IElSb3V0ZUNvbmZpZ0RhdGE7XHJcbn1cclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFNpbXBsZVJldXNlU3RyYXRlZ3kgaW1wbGVtZW50cyBSb3V0ZVJldXNlU3RyYXRlZ3kge1xyXG4gIHByaXZhdGUgc3RhdGljIHJvdXRlQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgSUNhY2hlZFJvdXRlPigpO1xyXG4gIHByaXZhdGUgc3RhdGljIHdhaXREZWxldGU6IGFueTtcclxuICBwcml2YXRlIHN0YXRpYyBjdXJyZW50RGVsZXRlOiBhbnk7XHJcblxyXG4gIHNob3VsZFJldXNlUm91dGUoZnV0dXJlOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90LCBjdXJyOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gZnV0dXJlLnJvdXRlQ29uZmlnID09PSBjdXJyLnJvdXRlQ29uZmlnO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkRGV0YWNoKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhyb3V0ZS5kYXRhWydrZWVwJ10pXHJcbiAgICAvLyAgIHJldHVybiBCb29sZWFuKHJvdXRlLmRhdGFbJ2tlZXAnXSk7XHJcbiAgfVxyXG5cclxuICBzdG9yZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgaGFuZGxlOiBEZXRhY2hlZFJvdXRlSGFuZGxlKTogdm9pZCB7XHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmdldEZ1bGxSb3V0ZVVybChyb3V0ZSk7XHJcbiAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRSb3V0ZURhdGEocm91dGUpO1xyXG4gICAgaWYgKFNpbXBsZVJldXNlU3RyYXRlZ3kud2FpdERlbGV0ZSAmJiBTaW1wbGVSZXVzZVN0cmF0ZWd5LndhaXREZWxldGUgPT09IHVybCkge1xyXG4gICAgICBTaW1wbGVSZXVzZVN0cmF0ZWd5LndhaXREZWxldGUgPSBudWxsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoU2ltcGxlUmV1c2VTdHJhdGVneS5jdXJyZW50RGVsZXRlICYmIFNpbXBsZVJldXNlU3RyYXRlZ3kuY3VycmVudERlbGV0ZSA9PT0gdXJsKSB7XHJcbiAgICAgICAgU2ltcGxlUmV1c2VTdHJhdGVneS5jdXJyZW50RGVsZXRlID0gbnVsbDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgU2ltcGxlUmV1c2VTdHJhdGVneS5yb3V0ZUNhY2hlLnNldCh1cmwsIHsgaGFuZGxlLCBkYXRhIH0pO1xyXG4gICAgICAgIHRoaXMuYWRkUmVkaXJlY3RzUmVjdXJzaXZlbHkocm91dGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaG91bGRBdHRhY2gocm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0RnVsbFJvdXRlVXJsKHJvdXRlKTtcclxuICAgIHJldHVybiBTaW1wbGVSZXVzZVN0cmF0ZWd5LnJvdXRlQ2FjaGUuaGFzKHVybCk7XHJcbiAgfVxyXG5cclxuICByZXRyaWV2ZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCk6IERldGFjaGVkUm91dGVIYW5kbGUgfCBhbnkge1xyXG4gICAgY29uc3QgdXJsID0gdGhpcy5nZXRGdWxsUm91dGVVcmwocm91dGUpO1xyXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Um91dGVEYXRhKHJvdXRlKTtcclxuICAgIHJldHVybiBkYXRhICYmIFNpbXBsZVJldXNlU3RyYXRlZ3kucm91dGVDYWNoZS5oYXModXJsKVxyXG4gICAgICA/IFNpbXBsZVJldXNlU3RyYXRlZ3kucm91dGVDYWNoZS5nZXQodXJsKT8uaGFuZGxlXHJcbiAgICAgIDogbnVsbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkUmVkaXJlY3RzUmVjdXJzaXZlbHkocm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvbmZpZyA9IHJvdXRlLnJvdXRlQ29uZmlnO1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICBpZiAoIWNvbmZpZy5sb2FkQ2hpbGRyZW4pIHtcclxuICAgICAgICBjb25zdCByb3V0ZUZpcnN0Q2hpbGQgPSByb3V0ZS5maXJzdENoaWxkO1xyXG4gICAgICAgIGNvbnN0IHJvdXRlRmlyc3RDaGlsZFVybCA9IHJvdXRlRmlyc3RDaGlsZFxyXG4gICAgICAgICAgPyB0aGlzLmdldFJvdXRlVXJsUGF0aHMocm91dGVGaXJzdENoaWxkKS5qb2luKCcvJylcclxuICAgICAgICAgIDogJyc7XHJcbiAgICAgICAgY29uc3QgY2hpbGRDb25maWdzID0gY29uZmlnLmNoaWxkcmVuO1xyXG4gICAgICAgIGlmIChjaGlsZENvbmZpZ3MpIHtcclxuICAgICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnV2l0aFJlZGlyZWN0ID0gY2hpbGRDb25maWdzLmZpbmQoYyA9PiBjLnBhdGggPT09ICcnICYmICEhYy5yZWRpcmVjdFRvKTtcclxuICAgICAgICAgIGlmIChjaGlsZENvbmZpZ1dpdGhSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBjaGlsZENvbmZpZ1dpdGhSZWRpcmVjdC5yZWRpcmVjdFRvID0gcm91dGVGaXJzdENoaWxkVXJsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkUm91dGUgPT4gdGhpcy5hZGRSZWRpcmVjdHNSZWN1cnNpdmVseShjaGlsZFJvdXRlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZ1bGxSb3V0ZVVybChyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRGdWxsUm91dGVVcmxQYXRocyhyb3V0ZSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJy8nKS5yZXBsYWNlKCcvJywgJ18nKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RnVsbFJvdXRlVXJsUGF0aHMocm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBwYXRocyA9IHRoaXMuZ2V0Um91dGVVcmxQYXRocyhyb3V0ZSk7XHJcbiAgICByZXR1cm4gcm91dGUucGFyZW50ID8gWy4uLnRoaXMuZ2V0RnVsbFJvdXRlVXJsUGF0aHMocm91dGUucGFyZW50KSwgLi4ucGF0aHNdIDogcGF0aHM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFJvdXRlVXJsUGF0aHMocm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gcm91dGUudXJsLm1hcCh1cmxTZWdtZW50ID0+IHVybFNlZ21lbnQucGF0aCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFJvdXRlRGF0YShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCk6IElSb3V0ZUNvbmZpZ0RhdGEgfCBhbnkge1xyXG4gICAgcmV0dXJuIHJvdXRlLnJvdXRlQ29uZmlnICYmIChyb3V0ZS5yb3V0ZUNvbmZpZy5kYXRhIGFzIElSb3V0ZUNvbmZpZ0RhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqIGRlbGV0ZSB0aGUgcm91dGUgc25hcHNob3QqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlUm91dGVTbmFwc2hvdCh1cmw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKHVybFswXSA9PT0gJy8nKSB7XHJcbiAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbiAgICB1cmwgPSB1cmwucmVwbGFjZSgnLycsICdfJyk7XHJcbiAgICBpZiAoU2ltcGxlUmV1c2VTdHJhdGVneS5yb3V0ZUNhY2hlLmhhcyh1cmwpKSB7XHJcbiAgICAgIFNpbXBsZVJldXNlU3RyYXRlZ3kucm91dGVDYWNoZS5kZWxldGUodXJsKTtcclxuICAgICAgU2ltcGxlUmV1c2VTdHJhdGVneS5jdXJyZW50RGVsZXRlID0gdXJsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgU2ltcGxlUmV1c2VTdHJhdGVneS53YWl0RGVsZXRlID0gdXJsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=